<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Infográfico - Rayo Palatianos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light gray background for contrast */
        }
        /* Custom colors from the Edge palette */
        .edge-blue { background-color: #0078D4; }
        .bg-adobe-red {
            background-color: #ff0000;
            background-image: linear-gradient(45deg, #ff4b4b, #ff0000, #b20000);
        }
        .text-edge-green { color: #42C89A; }
        .text-edge-cyan { color: #00A4EF; }
        .border-edge-green { border-color: #42C89A; }
        .icon-cyan { color: #00A4EF; }

        /* Animation for export button shine */
        #exportPdfBtn {
            position: relative;
            overflow: hidden;
        }
        #exportPdfBtn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);
            pointer-events: none;
            animation: shine 3s infinite;
        }
        @keyframes shine {
            0% { left: -100%; }
            60% { left: 100%; }
            100% { left: 100%; }
        }

        /* Timeline styles */
        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
            padding-left: 2.5rem; 
        }
        .timeline-item:last-child {
            padding-bottom: 0;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            height: 100%;
            width: 2px;
            background-color: #e2e8f0;
        }
        .timeline-item::after {
            content: '';
            position: absolute;
            left: -6px; /* Adjust to center the dot on the line */
            top: 5px;
            height: 14px;
            width: 14px;
            border-radius: 50%;
            background-color: #00A4EF;
            border: 2px solid #fff;
            z-index: 10;
        }
    </style>
</head>
<body class="text-gray-800">
    <div class="max-w-6xl mx-auto my-8 shadow-2xl rounded-lg overflow-hidden bg-white print:shadow-none">
        <div class="md:flex">
            <!-- Left Column / Sidebar -->
            <aside id="sidebar" class="md:w-2/5 p-8 edge-blue text-white"></aside>

            <!-- Right Column / Main Content -->
            <main class="md:w-3/5 p-8">
                <!-- Profile Section -->
                <section class="mb-6">
                    <h3 class="text-2xl font-bold mb-4 text-edge-green flex items-center"><i class="fas fa-user-tie mr-3 text-edge-cyan"></i>PERFIL PROFESIONAL</h3>
                    <p class="text-gray-600 leading-relaxed text-sm">
                        Consultor y gestor administrativo con sólida trayectoria en los sectores financiero, comercial y digital. Con amplias competencias en inteligencia de negocios, atención al cliente, procesos documentales y gestión de conflictos. Cuento, además, con una base formativa en Derecho colombiano gracias a seis semestres cursados, lo cual refuerza mi criterio en la interpretación normativa y en la gestión de procesos públicos. Destaco por mi habilidad para generar soluciones eficaces, adaptarme a contextos complejos y fomentar relaciones humanas basadas en la empatía, el servicio y la comunicación asertiva. Mi experiencia incluye liderar procesos de expansión, atención ciudadana, resolución de trámites, formación educativa y manejo de herramientas tecnológicas para optimizar la operación institucional. Mi formación académica, en combinación con mi vocación de servicio, me perfilan como un aliado estratégico para dependencias públicas de carácter administrativo, social o financiero.
                    </p>
                </section>

                <!-- Experience Section -->
                <section class="mb-6">
                    <h3 class="text-2xl font-bold mb-6 text-edge-green flex items-center"><i class="fas fa-briefcase mr-3 text-edge-cyan"></i>EXPERIENCIA LABORAL</h3>
                    <div id="experienceList" class="relative">
                        <!-- Los elementos de experiencia se cargan desde experiencia.json -->
                    </div>
                </section>

                <!-- Education Section -->
                <section class="mb-6">
                    <h3 class="text-2xl font-bold mb-4 text-edge-green flex items-center"><i class="fas fa-graduation-cap mr-3 text-edge-cyan"></i>FORMACIÓN ACADÉMICA</h3>
                    <div id="educationList" class="space-y-3 text-sm">
                        <!-- La información académica se carga desde formacion.json -->
                    </div>
                </section>
                
                <!-- Certifications Section -->
                <section>
                    <h3 class="text-2xl font-bold mb-4 text-edge-green flex items-center"><i class="fas fa-award mr-3 text-edge-cyan"></i>CERTIFICACIONES</h3>
                    <div id="certificationGrid" class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-5 text-xs">
                        <!-- Las certificaciones se cargan desde certificaciones.json -->
                    </div>
                </section>
            </main>
        </div>
</div>

    <!-- PDF Export Button -->
    <button id="exportPdfBtn" class="fixed bottom-4 left-1/2 transform -translate-x-1/2 print:hidden bg-adobe-red text-white px-4 py-2 rounded shadow-lg">EXPORTAR A PDF</button>
    <!-- Overlay with export size options -->
    <div id="pdfOverlay" class="hidden fixed inset-0 bg-black bg-opacity-50 print:hidden flex items-center justify-center">
        <div class="bg-white p-6 rounded-lg shadow-lg grid grid-cols-1 md:grid-cols-3 gap-4">
            <button data-size="letter" class="pdf-option border rounded p-4 hover:bg-edge-blue hover:text-white">Tamaño Carta</button>
            <button data-size="custom" class="pdf-option border rounded p-4 hover:bg-edge-blue hover:text-white">Tamaño Real</button>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        const openBtn = document.getElementById('exportPdfBtn');
        const overlay = document.getElementById('pdfOverlay');
        const { jsPDF } = window.jspdf;

        openBtn.addEventListener('click', () => {
            overlay.classList.remove('hidden');
        });

        document.querySelectorAll('.pdf-option').forEach(el => {
            el.addEventListener('click', () => {
                overlay.classList.add('hidden');
                exportPdf(el.dataset.size);
            });
        });

        function exportPdf(option) {
            const container = document.querySelector(".max-w-6xl");
            html2canvas(container, {scale: 2, useCORS: true}).then(canvas => {
                const imgData = canvas.toDataURL("image/png");
                let pdfWidth, pdfHeight;
                if (option === "letter") {
                    pdfWidth = 612;
                    pdfHeight = 792;
                } else {
                    pdfWidth = canvas.width * 0.75;
                    pdfHeight = canvas.height * 0.75;
                }
                const doc = new jsPDF({orientation: pdfWidth > pdfHeight ? "landscape" : "portrait", unit: "pt", format: [pdfWidth, pdfHeight]});
                let imgWidth = pdfWidth;
                let imgHeight = canvas.height * pdfWidth / canvas.width;
                if (imgHeight > pdfHeight) {
                    imgHeight = pdfHeight;
                    imgWidth = canvas.width * pdfHeight / canvas.height;
                }
                doc.addImage(imgData, "PNG", 0, 0, imgWidth, imgHeight);
                doc.save("cv.pdf");
            });
        }

        async function loadData() {
            const [profile, experiencia, formacion, certificaciones] = await Promise.all([
                fetch("profile.json").then(r => r.json()),
                fetch("experiencia.json").then(r => r.json()),
                fetch("formacion.json").then(r => r.json()),
                fetch("certificaciones.json").then(r => r.json())
            ]);

            const sidebar = document.getElementById("sidebar");
            const skillsHtml = Object.entries(profile.skills).map(([cat, items]) => `
                <div>
                    <h4 class="font-semibold text-gray-200 mb-2">${cat}:</h4>
                    <ul class="list-disc list-inside space-y-1 pl-2">
                        ${items.map(i => `<li>${i}</li>`).join('')}
                    </ul>
                </div>
            `).join('');
            const languagesHtml = Object.entries(profile.languages)
                .map(([lang, lvl]) => `<p class="text-sm"><strong>${lang}:</strong> ${lvl}</p>`).join('');
            sidebar.innerHTML = `
                <div class="text-center mb-8">
                    <img src="${profile.photoUrl}" alt="Foto de ${profile.name}" class="rounded-full w-36 h-36 mx-auto mb-4 border-4 border-white shadow-lg">
                    <h1 class="text-3xl font-bold">${profile.name}</h1>
                    <h2 class="text-lg font-light text-gray-200">${profile.title}</h2>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold border-b-2 border-edge-green pb-2 mb-4 text-edge-green">CONTACTO</h3>
                    <ul class="space-y-3 text-sm">
                        <li><i class="fas fa-envelope fa-fw w-6 icon-cyan"></i> ${profile.contact.email}</li>
                        <li><i class="fas fa-phone-alt fa-fw w-6 icon-cyan"></i> ${profile.contact.phone}</li>
                        <li><i class="fas fa-map-marker-alt fa-fw w-6 icon-cyan"></i> ${profile.contact.location}</li>
                    </ul>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold border-b-2 border-edge-green pb-2 mb-4 text-edge-green">HABILIDADES</h3>
                    <div class="text-sm space-y-4">
                        ${skillsHtml}
                    </div>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-semibold border-b-2 border-edge-green pb-2 mb-4 text-edge-green">IDIOMAS</h3>
                    ${languagesHtml}
                </div>
                <div>
                    <h3 class="text-xl font-semibold border-b-2 border-edge-green pb-2 mb-4 text-edge-green">INTERESES</h3>
                    <ul class="list-disc list-inside text-sm space-y-1 pl-2">
                        ${profile.interests.map(i => `<li>${i}</li>`).join('')}
                    </ul>
                </div>
            `;
            const expContainer = document.getElementById('experienceList');
            experiencia.forEach(item => {
                const div = document.createElement('div');
                div.className = 'timeline-item';
                div.innerHTML = `
                    <h4 class="font-semibold text-md text-gray-800">${item.role}</h4>
                    <p class="text-xs text-gray-500 mb-1">${item.company} | ${item.period}</p>
                    <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
                        ${item.details.map(d => `<li>${d}</li>`).join('')}
                    </ul>
                `;
                expContainer.appendChild(div);
            });

            const eduContainer = document.getElementById('educationList');
            formacion.forEach(item => {
                const p = document.createElement('p');
                p.innerHTML = `<strong>${item.program}</strong> – ${item.institution}, ${item.detail}`;
                eduContainer.appendChild(p);
            });

            const certContainer = document.getElementById('certificationGrid');
            certificaciones.forEach(cat => {
                const div = document.createElement('div');
                if (cat.spanTwo) div.classList.add('md:col-span-2');
                const ulClass = cat.spanTwo ? 'space-y-1 text-gray-600 columns-2' : 'space-y-1 text-gray-600';
                div.innerHTML = `
                    <h4 class="font-bold text-gray-700 mb-2 uppercase">${cat.category}</h4>
                    <ul class="${ulClass}">
                        ${cat.items.map(i => `<li>${i}</li>`).join('')}
                    </ul>
                `;
                certContainer.appendChild(div);
            });
        }

        window.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
